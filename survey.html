<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>泡泡星球 · 洗车习惯调研</title>
<link rel="stylesheet" href="css/common.css">
<link rel="stylesheet" href="css/survey.css">
</head>
<body>
<div class="page-container" id="app">

  <!-- 导航栏 -->
  <div class="nav-bar">泡泡星球 · 洗车调研</div>

  <!-- 进度条 -->
  <div class="progress-bar" id="progressBar">
    <div class="progress-dot active" data-step="0"></div>
    <div class="progress-dot" data-step="1"></div>
    <div class="progress-dot" data-step="2"></div>
    <div class="progress-dot" data-step="3"></div>
    <div class="progress-dot" data-step="4"></div>
    <span class="progress-label" id="progressLabel">1 / 5</span>
  </div>

  <!-- ===== 第1步：基本信息 ===== -->
  <div class="form-section active" data-step="0">
    <h2 class="section-title">👋 基本信息</h2>
    <p class="section-desc">让我们先了解一下您</p>

    <div class="form-group">
      <label class="form-label">您的称呼 <span class="required">*</span></label>
      <input class="form-input" type="text" id="f_name" placeholder="如：张先生 / 小王">
    </div>

    <div class="form-group">
      <label class="form-label">性别 <span class="required">*</span></label>
      <div class="option-group" data-field="f_gender" data-type="radio">
        <div class="option-btn" data-value="男">男</div>
        <div class="option-btn" data-value="女">女</div>
      </div>
    </div>

    <div class="form-group">
      <label class="form-label">年龄</label>
      <input class="form-input" type="number" id="f_age" placeholder="如：32" min="18" max="80">
    </div>

    <div class="form-group">
      <label class="form-label">驾龄</label>
      <div class="option-group" data-field="f_driving_years" data-type="radio">
        <div class="option-btn" data-value="1年以内">1年以内</div>
        <div class="option-btn" data-value="1-3年">1-3年</div>
        <div class="option-btn" data-value="3-5年">3-5年</div>
        <div class="option-btn" data-value="5-9年">5-9年</div>
        <div class="option-btn" data-value="10年以上">10年以上</div>
      </div>
    </div>

    <div class="form-group">
      <label class="form-label">车龄</label>
      <div class="option-group" data-field="f_car_age" data-type="radio">
        <div class="option-btn" data-value="1年以内">1年以内</div>
        <div class="option-btn" data-value="1-3年">1-3年</div>
        <div class="option-btn" data-value="4-5年">4-5年</div>
        <div class="option-btn" data-value="6-9年">6-9年</div>
        <div class="option-btn" data-value="10年以上">10年以上</div>
      </div>
    </div>

    <div class="form-group">
      <label class="form-label">车辆类型</label>
      <div class="option-group" data-field="f_car_type" data-type="multi">
        <div class="option-btn" data-value="油车">油车</div>
        <div class="option-btn" data-value="电车">电车</div>
        <div class="option-btn" data-value="混动">混动</div>
        <div class="option-btn" data-value="增程">增程</div>
      </div>
    </div>

    <div class="form-group">
      <label class="form-label">车辆品牌</label>
      <input class="form-input" type="text" id="f_brand" placeholder="如：特斯拉、BYD、宝马...">
    </div>

    <div class="form-group">
      <label class="form-label">职业</label>
      <input class="form-input" type="text" id="f_occupation" placeholder="如：程序员、教师、销售...">
    </div>

    <div class="form-group">
      <label class="form-label">家庭情况</label>
      <div class="option-group" data-field="f_family_info" data-type="radio">
        <div class="option-btn" data-value="单身">单身</div>
        <div class="option-btn" data-value="有对象">有对象</div>
        <div class="option-btn" data-value="已婚无娃">已婚无娃</div>
        <div class="option-btn" data-value="已婚有娃">已婚有娃</div>
        <div class="option-btn" data-value="已婚俩娃及以上">已婚俩娃+</div>
      </div>
    </div>

    <div class="form-group">
      <label class="form-label">所在区域</label>
      <select class="form-select" id="f_region">
        <option value="">请选择</option>
        <option value="南山区">南山区</option>
        <option value="福田区">福田区</option>
        <option value="宝安区">宝安区</option>
        <option value="龙华区">龙华区</option>
        <option value="罗湖区">罗湖区</option>
        <option value="龙岗区">龙岗区</option>
        <option value="光明区">光明区</option>
        <option value="盐田区">盐田区</option>
        <option value="坪山区">坪山区</option>
        <option value="大鹏新区">大鹏新区</option>
        <option value="其他">其他</option>
      </select>
    </div>
  </div>

  <!-- ===== 第2步：洗车习惯 ===== -->
  <div class="form-section" data-step="1">
    <h2 class="section-title">🚗 洗车习惯</h2>
    <p class="section-desc">了解您的洗车日常</p>

    <div class="form-group">
      <label class="form-label">发现车子变脏时，您第一反应关注的是？</label>
      <div class="option-group" data-field="f_first_reaction" data-type="multi">
        <div class="option-btn" data-value="外观">外观</div>
        <div class="option-btn" data-value="内饰">内饰</div>
      </div>
    </div>

    <div class="form-group">
      <label class="form-label">具体是哪些地方脏了会让您想洗车？</label>
      <div class="option-group" data-field="f_dirty_desc" data-type="multi">
        <div class="option-btn" data-value="外观灰尘">外观灰尘</div>
        <div class="option-btn" data-value="雨后泥点子">雨后泥点子</div>
        <div class="option-btn" data-value="鸟屎">鸟屎</div>
        <div class="option-btn" data-value="树胶">树胶</div>
        <div class="option-btn" data-value="树叶">树叶</div>
        <div class="option-btn" data-value="内饰灰尘">内饰灰尘</div>
        <div class="option-btn" data-value="零食渣子">零食渣子</div>
        <div class="option-btn" data-value="前挡玻璃脏">前挡玻璃脏</div>
        <div class="option-btn" data-value="玻璃污渍">玻璃污渍</div>
        <div class="option-btn" data-value="水痕水渍">水痕水渍</div>
      </div>
    </div>

    <div class="form-group">
      <label class="form-label">您通常在什么时间段洗车？</label>
      <div class="option-group" data-field="f_wash_time" data-type="multi">
        <div class="option-btn" data-value="工作日">工作日</div>
        <div class="option-btn" data-value="周末">周末</div>
      </div>
    </div>

    <div class="form-group">
      <label class="form-label">什么场景会触发您去洗车？</label>
      <div class="option-group" data-field="f_trigger" data-type="multi">
        <div class="option-btn" data-value="特意去洗车">特意去洗车</div>
        <div class="option-btn" data-value="工作日托管">工作日托管</div>
        <div class="option-btn" data-value="加油顺便洗车">加油顺便</div>
        <div class="option-btn" data-value="去商场顺便洗车">商场顺便</div>
        <div class="option-btn" data-value="工作日下班回家路上顺路洗车">下班顺路</div>
        <div class="option-btn" data-value="自助洗车">自助洗车</div>
        <div class="option-btn" data-value="充电顺便洗车">充电顺便</div>
      </div>
    </div>

    <div class="form-group">
      <label class="form-label">您大约多久洗一次车？ <span class="required">*</span></label>
      <div class="option-group" data-field="f_frequency" data-type="radio">
        <div class="option-btn" data-value="1-2周一次">1-2周一次</div>
        <div class="option-btn" data-value="每月一次">每月一次</div>
        <div class="option-btn" data-value="每月多次">每月多次</div>
        <div class="option-btn" data-value="1-2个月洗一次">1-2个月</div>
        <div class="option-btn" data-value="2-3个月洗一次">2-3个月</div>
        <div class="option-btn" data-value="3个月一次">3个月+</div>
      </div>
    </div>

    <div class="form-group">
      <label class="form-label">请描述一下最近一次洗车的情况</label>
      <textarea class="form-input" id="f_recent_wash" placeholder="比如：在哪洗的、什么时候、花了多少钱..."></textarea>
    </div>
  </div>

  <!-- ===== 第3步：信息与决策 ===== -->
  <div class="form-section" data-step="2">
    <h2 class="section-title">🔍 了解洗车店</h2>
    <p class="section-desc">您是如何找到和选择洗车店的</p>

    <div class="form-group">
      <label class="form-label">您是通过什么渠道了解到洗车店的？</label>
      <div class="option-group" data-field="f_how_learn" data-type="multi">
        <div class="option-btn" data-value="线下经过看到">路过看到</div>
        <div class="option-btn" data-value="美团大众点评搜索">大众点评/美团</div>
        <div class="option-btn" data-value="朋友推荐">朋友推荐</div>
        <div class="option-btn" data-value="抖音刷到">抖音</div>
        <div class="option-btn" data-value="小红书刷到">小红书</div>
        <div class="option-btn" data-value="保险公司指定">保险指定</div>
        <div class="option-btn" data-value="高德搜索">高德搜索</div>
        <div class="option-btn" data-value="京东推荐">京东/天猫</div>
      </div>
    </div>

    <div class="form-group">
      <label class="form-label">洗车前会看天气预报吗？</label>
      <div class="option-group" data-field="f_check_weather" data-type="radio">
        <div class="option-btn" data-value="每次洗车前看天气预报">每次都看</div>
        <div class="option-btn" data-value="偶尔看">偶尔看</div>
        <div class="option-btn" data-value="不看天气预报">不看</div>
      </div>
    </div>

    <div class="form-group">
      <label class="form-label">什么天气会影响您的洗车决定？</label>
      <div class="option-group" data-field="f_weather_impact" data-type="multi">
        <div class="option-btn" data-value="台风">台风</div>
        <div class="option-btn" data-value="连续降雨">连续降雨</div>
        <div class="option-btn" data-value="小雨不影响洗车">小雨不影响</div>
        <div class="option-btn" data-value="下雨就不洗车">下雨就不洗</div>
        <div class="option-btn" data-value="不关注天气">不关注天气</div>
      </div>
    </div>

    <div class="form-group">
      <label class="form-label">您的预约/排队习惯？</label>
      <div class="option-group" data-field="f_queue_habit" data-type="multi">
        <div class="option-btn" data-value="电话预约确认">电话预约</div>
        <div class="option-btn" data-value="小程序预约">小程序预约</div>
        <div class="option-btn" data-value="直接到店排队久就下次再来">直接去，人多就走</div>
        <div class="option-btn" data-value="知道什么时候人多人少">了解人多人少</div>
        <div class="option-btn" data-value="托管">托管</div>
      </div>
    </div>

    <div class="form-group">
      <label class="form-label">什么情况会让您放弃洗车？</label>
      <textarea class="form-input" id="f_inhibit" placeholder="比如：排队太长、下雨、价格太贵..."></textarea>
    </div>
  </div>

  <!-- ===== 第4步：偏好与满意度 ===== -->
  <div class="form-section" data-step="3">
    <h2 class="section-title">⭐ 偏好与满意度</h2>
    <p class="section-desc">您对洗车店的看法</p>

    <div class="form-group">
      <label class="form-label">您有固定去的洗车店吗？</label>
      <div class="option-group" data-field="f_has_fixed" data-type="radio" data-conditional="fixedShopDetail">
        <div class="option-btn" data-value="有">有</div>
        <div class="option-btn" data-value="没有">没有</div>
      </div>
    </div>

    <div class="form-group conditional" id="fixedShopDetail">
      <label class="form-label">您常去的洗车店品牌/名称</label>
      <input class="form-input" type="text" id="f_fixed_brand" placeholder="如：途虎养车、京东养车、街边小店...">
    </div>

    <div class="form-group">
      <label class="form-label">您对目前洗车店的整体满意度？</label>
      <div class="option-group" data-field="f_satisfaction" data-type="radio">
        <div class="option-btn" data-value="特别满意">😍 特别满意</div>
        <div class="option-btn" data-value="满意">😊 满意</div>
        <div class="option-btn" data-value="凑合">😐 凑合</div>
        <div class="option-btn" data-value="不满意">😕 不满意</div>
      </div>
    </div>

    <div class="form-group">
      <label class="form-label">现有洗车店最不满意的地方是？</label>
      <div class="option-group" data-field="f_dissatisfaction" data-type="multi">
        <div class="option-btn" data-value="洗不干净">洗不干净</div>
        <div class="option-btn" data-value="排队">排队时间长</div>
        <div class="option-btn" data-value="态度不好">态度不好</div>
        <div class="option-btn" data-value="价格贵">价格贵</div>
        <div class="option-btn" data-value="推销行为">推销办卡</div>
        <div class="option-btn" data-value="距离远">距离远</div>
        <div class="option-btn" data-value="充钱跑路">怕充钱跑路</div>
        <div class="option-btn" data-value="车内饰清洁不干净">内饰洗不干净</div>
        <div class="option-btn" data-value="没有不满意">没有不满意</div>
      </div>
    </div>

    <div class="form-group">
      <label class="form-label">选择洗车店时，您最看重什么？ <span class="required">*</span></label>
      <div class="option-group" data-field="f_first_priority" data-type="radio">
        <div class="option-btn" data-value="方便">🏃 方便/距离近</div>
        <div class="option-btn" data-value="价格">💰 价格实惠</div>
        <div class="option-btn" data-value="清洗质量">✨ 清洗质量</div>
        <div class="option-btn" data-value="整体服务">🤝 服务态度</div>
        <div class="option-btn" data-value="门店环境">🏪 门店环境</div>
        <div class="option-btn" data-value="评价">⭐ 评价口碑</div>
      </div>
    </div>

    <div class="form-group">
      <label class="form-label">您能区分不同洗车店的清洁质量吗？</label>
      <div class="option-group" data-field="f_distinguish" data-type="radio">
        <div class="option-btn" data-value="可以区分">能明显区分</div>
        <div class="option-btn" data-value="没有区别">差不多区分不出</div>
      </div>
    </div>

    <div class="form-group">
      <label class="form-label">还有哪些因素影响您选择洗车店？</label>
      <textarea class="form-input" id="f_other_criteria" placeholder="自由填写..."></textarea>
    </div>
  </div>

  <!-- ===== 第5步：价格与服务 ===== -->
  <div class="form-section" data-step="4">
    <h2 class="section-title">💰 价格与服务</h2>
    <p class="section-desc">最后几个问题就完成了！</p>

    <div class="form-group">
      <label class="form-label">您目前单次洗车花费大约是？ <span class="required">*</span></label>
      <div class="option-group" data-field="f_price" data-type="multi">
        <div class="option-btn" data-value="30以内">30元以内</div>
        <div class="option-btn" data-value="30-50">30-50元</div>
        <div class="option-btn" data-value="50-70">50-70元</div>
        <div class="option-btn" data-value="70-90">70-90元</div>
        <div class="option-btn" data-value="90-110">90-110元</div>
        <div class="option-btn" data-value="110-130">110-130元</div>
        <div class="option-btn" data-value="130-150">130-150元</div>
        <div class="option-btn" data-value="150-200">150-200元</div>
        <div class="option-btn" data-value="200-300">200-300元</div>
      </div>
    </div>

    <div class="form-group">
      <label class="form-label">您做过或感兴趣的洗车项目？</label>
      <div class="option-group" data-field="f_project" data-type="multi">
        <div class="option-btn" data-value="打蜡">打蜡</div>
        <div class="option-btn" data-value="抛光">抛光</div>
        <div class="option-btn" data-value="镀膜">镀膜</div>
        <div class="option-btn" data-value="除油膜">除油膜</div>
        <div class="option-btn" data-value="内饰清洁">内饰清洁</div>
        <div class="option-btn" data-value="臭氧消毒">臭氧消毒</div>
        <div class="option-btn" data-value="没做过项目">没做过</div>
      </div>
    </div>

    <div class="form-group">
      <label class="form-label">还有什么想告诉我们的？</label>
      <textarea class="form-input" id="f_notes" placeholder="任何关于洗车的想法、建议、吐槽都欢迎..."></textarea>
    </div>
  </div>

  <!-- 成功页 -->
  <div class="success-page" id="successPage">
    <div class="success-icon">✓</div>
    <h2 class="success-title">感谢您的参与！</h2>
    <p class="success-sub">您的反馈对泡泡星球非常重要<br>我们会用心改进洗车服务</p>
    <button class="btn-primary" style="margin-top:32px;width:100%" onclick="location.href='index.html'">了解泡泡星球洗车服务 →</button>
  </div>

  <!-- 底部操作栏 -->
  <div class="form-actions" id="formActions">
    <button class="btn-secondary" id="prevBtn" onclick="prevStep()" style="display:none">上一步</button>
    <button class="btn-primary" id="nextBtn" onclick="nextStep()">下一步</button>
  </div>
</div>

<div class="toast" id="toast"></div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="js/supabase-config.js"></script>
<script src="js/survey.js"></script>
</body>
</html>
